<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GitHub Copilot Proxy - Setup & Integration</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      max-width: 900px;
      margin: 0 auto;
      padding: 2rem;
      line-height: 1.6;
      background-color: #fafbfc;
    }
    .navbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 2rem;
      border-bottom: 1px solid #e1e4e8;
      padding-bottom: 1rem;
    }
    .navbar a {
      color: #0366d6;
      text-decoration: none;
      margin-left: 1rem;
    }
    .navbar a:hover {
      text-decoration: underline;
    }
    .navbar a.active {
      font-weight: bold;
    }
    h1 {
      color: #0366d6;
      margin: 0;
    }
    h2 {
      color: #24292e;
      border-bottom: 1px solid #e1e4e8;
      padding-bottom: 0.5rem;
    }
    h3 {
      color: #586069;
    }
    .status-banner {
      padding: 1rem;
      border-radius: 6px;
      margin-bottom: 2rem;
    }
    .status-banner.success {
      background-color: #dcffe4;
      color: #1b7736;
      border: 1px solid #34d058;
    }
    .status-banner.warning {
      background-color: #fff9e0;
      color: #9c6603;
      border: 1px solid #f9c513;
    }
    .integration-card {
      background: white;
      border: 1px solid #e1e4e8;
      border-radius: 6px;
      padding: 1.5rem;
      margin-bottom: 1.5rem;
    }
    .integration-card h3 {
      margin-top: 0;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    .integration-card .logo {
      width: 24px;
      height: 24px;
    }
    code {
      background-color: #f6f8fa;
      padding: 0.2em 0.4em;
      border-radius: 3px;
      font-family: SFMono-Regular, Consolas, "Liberation Mono", Menlo, monospace;
      font-size: 85%;
    }
    .code-block {
      background-color: #24292e;
      color: #e1e4e8;
      padding: 1rem;
      border-radius: 6px;
      overflow-x: auto;
      font-family: SFMono-Regular, Consolas, "Liberation Mono", Menlo, monospace;
      font-size: 14px;
      margin: 1rem 0;
    }
    .code-block .comment {
      color: #6a737d;
    }
    .code-block .string {
      color: #9ecbff;
    }
    .code-block .key {
      color: #79b8ff;
    }
    .copy-btn {
      background-color: #0366d6;
      border: none;
      border-radius: 4px;
      color: white;
      cursor: pointer;
      font-size: 12px;
      padding: 4px 8px;
      margin-left: 8px;
    }
    .copy-btn:hover {
      background-color: #0256b8;
    }
    .copy-btn.copied {
      background-color: #2ea44f;
    }
    .endpoint-table {
      width: 100%;
      border-collapse: collapse;
      margin: 1rem 0;
    }
    .endpoint-table th, .endpoint-table td {
      border: 1px solid #e1e4e8;
      padding: 0.75rem;
      text-align: left;
    }
    .endpoint-table th {
      background-color: #f6f8fa;
    }
    .endpoint-table code {
      background-color: #eef;
    }
    .step-number {
      display: inline-block;
      width: 24px;
      height: 24px;
      background-color: #0366d6;
      color: white;
      border-radius: 50%;
      text-align: center;
      line-height: 24px;
      font-weight: bold;
      margin-right: 0.5rem;
    }
    .step {
      margin: 1rem 0;
      padding-left: 2rem;
    }
    .tag {
      display: inline-block;
      padding: 0.2em 0.6em;
      border-radius: 3px;
      font-size: 12px;
      font-weight: 600;
    }
    .tag.recommended {
      background-color: #dcffe4;
      color: #1b7736;
    }
    .tag.advanced {
      background-color: #f1f8ff;
      color: #0366d6;
    }
    .test-btn {
      background-color: #2ea44f;
      border: 1px solid rgba(27, 31, 35, .15);
      border-radius: 6px;
      color: #fff;
      cursor: pointer;
      font-size: 14px;
      font-weight: 600;
      padding: 8px 16px;
      margin-top: 1rem;
    }
    .test-btn:hover {
      background-color: #2c974b;
    }
    .test-btn:disabled {
      background-color: #94d3a2;
      cursor: not-allowed;
    }
    .test-result {
      margin-top: 1rem;
      padding: 1rem;
      border-radius: 6px;
      display: none;
    }
    .test-result.success {
      display: block;
      background-color: #dcffe4;
      color: #1b7736;
    }
    .test-result.error {
      display: block;
      background-color: #ffe3e3;
      color: #cc1b1b;
    }
    .hidden {
      display: none;
    }
  </style>
</head>
<body>
  <div class="navbar">
    <h1>üöÄ Setup & Integration</h1>
    <div>
      <a href="/auth.html">Authentication</a>
      <a href="/setup.html" class="active">Setup</a>
      <a href="/usage.html">Usage</a>
    </div>
  </div>

  <div id="status-banner" class="status-banner warning">
    Checking authentication status...
  </div>

  <!-- Quick Start -->
  <div class="integration-card">
    <h2>‚ö° Quick Start</h2>
    <p>Your proxy is running at: <strong><code id="proxy-url">http://localhost:3000</code></strong></p>
    
    <h3>Available Endpoints</h3>
    <table class="endpoint-table">
      <thead>
        <tr>
          <th>Endpoint</th>
          <th>Description</th>
          <th>Use Case</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code id="endpoint-models">/v1/models</code></td>
          <td>List available models</td>
          <td>Model discovery</td>
        </tr>
        <tr>
          <td><code id="endpoint-chat">/v1/chat/completions</code></td>
          <td>Chat completions API</td>
          <td>Cursor chat, Continue, LangChain</td>
        </tr>
        <tr>
          <td><code id="endpoint-completions">/v1/completions</code></td>
          <td>Legacy completions API</td>
          <td>Cursor tab completions</td>
        </tr>
        <tr>
          <td><code id="endpoint-responses">/v1/responses</code></td>
          <td>OpenAI Responses API</td>
          <td>OpenAI Agents SDK</td>
        </tr>
      </tbody>
    </table>

    <button id="test-connection-btn" class="test-btn">üîó Test Connection</button>
    <div id="test-result" class="test-result"></div>
  </div>

  <!-- Cursor IDE -->
  <div class="integration-card">
    <h3>üñ±Ô∏è Cursor IDE <span class="tag recommended">Recommended</span></h3>
    <p>Bypass Cursor's 500 requests/month limit by using your GitHub Copilot subscription.</p>
    
    <p><span class="step-number">1</span> Open Cursor Settings (<code>Ctrl+,</code> or <code>Cmd+,</code>)</p>
    <p><span class="step-number">2</span> Navigate to <strong>Models</strong> ‚Üí <strong>OpenAI API Key</strong></p>
    <p><span class="step-number">3</span> Enter any dummy API key (e.g., <code>sk-dummy</code>)</p>
    <p><span class="step-number">4</span> Set <strong>Override OpenAI Base URL</strong> to:</p>
    <div class="code-block">
      <span id="cursor-base-url">http://localhost:3000/v1</span>
      <button class="copy-btn" onclick="copyToClipboard('cursor-base-url', this)">Copy</button>
    </div>
    <p><span class="step-number">5</span> Use models like <code>gpt-4o</code>, <code>claude-sonnet-4</code>, or <code>gemini-2.5-pro</code></p>
  </div>

  <!-- OpenClaw -->
  <div class="integration-card">
    <h3>ü¶Ä OpenClaw Gateway <span class="tag recommended">Recommended</span></h3>
    <p>Use with <a href="https://github.com/openclaw/openclaw" target="_blank">OpenClaw</a> for additional features and model routing.</p>
    
    <p><span class="step-number">1</span> Install OpenClaw:</p>
    <div class="code-block">
      npm install -g openclaw
    </div>
    
    <p><span class="step-number">2</span> Run with this proxy as the backend:</p>
    <div class="code-block">
      openclaw gateway --upstream <span id="openclaw-upstream">http://localhost:3000</span> --port 18789
    </div>
    
    <p><span class="step-number">3</span> Configure Cursor to use OpenClaw gateway at <code>http://localhost:18789/v1</code></p>
  </div>

  <!-- Continue -->
  <div class="integration-card">
    <h3>‚ñ∂Ô∏è Continue Extension</h3>
    <p>Use with <a href="https://continue.dev" target="_blank">Continue</a> VS Code extension.</p>
    
    <p>Add to your <code>~/.continue/config.json</code>:</p>
    <div class="code-block">
{
  <span class="key">"models"</span>: [
    {
      <span class="key">"title"</span>: <span class="string">"GitHub Copilot (via Proxy)"</span>,
      <span class="key">"provider"</span>: <span class="string">"openai"</span>,
      <span class="key">"model"</span>: <span class="string">"gpt-4o"</span>,
      <span class="key">"apiBase"</span>: <span class="string">"<span id="continue-api-base">http://localhost:3000/v1</span>"</span>,
      <span class="key">"apiKey"</span>: <span class="string">"dummy"</span>
    }
  ]
}
      <button class="copy-btn" onclick="copyConfig('continue')" style="position: relative; top: -80px; float: right;">Copy</button>
    </div>
  </div>

  <!-- Aider -->
  <div class="integration-card">
    <h3>ü§ñ Aider</h3>
    <p>Use with <a href="https://aider.chat" target="_blank">Aider</a> AI pair programming.</p>
    
    <div class="code-block">
<span class="comment"># Set environment variables</span>
export OPENAI_API_BASE=<span id="aider-api-base">http://localhost:3000/v1</span>
export OPENAI_API_KEY=dummy

<span class="comment"># Run Aider</span>
aider --model gpt-4o
    </div>
  </div>

  <!-- LangChain / LlamaIndex -->
  <div class="integration-card">
    <h3>ü¶ú LangChain & ü¶ô LlamaIndex <span class="tag advanced">Advanced</span></h3>
    
    <p><strong>LangChain (Python):</strong></p>
    <div class="code-block">
from langchain_openai import ChatOpenAI

llm = ChatOpenAI(
    model=<span class="string">"gpt-4o"</span>,
    base_url=<span class="string">"<span id="langchain-base-url">http://localhost:3000/v1</span>"</span>,
    api_key=<span class="string">"dummy"</span>
)
    </div>

    <p><strong>LlamaIndex (Python):</strong></p>
    <div class="code-block">
from llama_index.llms.openai import OpenAI

llm = OpenAI(
    model=<span class="string">"gpt-4o"</span>,
    api_base=<span class="string">"<span id="llamaindex-base-url">http://localhost:3000/v1</span>"</span>,
    api_key=<span class="string">"dummy"</span>
)
    </div>
  </div>

  <!-- Available Models -->
  <div class="integration-card">
    <h2>ü§ñ Available Models</h2>
    <p>These models are available through the proxy:</p>
    
    <h4>Claude (Anthropic)</h4>
    <code>claude-opus-4.5</code> <code>claude-sonnet-4.5</code> <code>claude-sonnet-4</code> <code>claude-haiku-4.5</code>
    
    <h4>GPT (OpenAI/Azure)</h4>
    <code>gpt-4o</code> <code>gpt-4o-mini</code> <code>gpt-4.1</code> <code>gpt-4</code> <code>gpt-3.5-turbo</code>
    
    <h4>Gemini (Google)</h4>
    <code>gemini-2.5-pro</code> <code>gemini-3-pro-preview</code> <code>gemini-3-flash-preview</code>
    
    <h4>Reasoning Models</h4>
    <code>o1-preview</code> <code>o1-mini</code> <code>o3-mini</code>
  </div>

  <script>
    const apiUrl = window.location.origin;
    
    // Update all URLs with actual server URL
    document.getElementById('proxy-url').textContent = apiUrl;
    document.getElementById('cursor-base-url').textContent = `${apiUrl}/v1`;
    document.getElementById('openclaw-upstream').textContent = apiUrl;
    document.getElementById('continue-api-base').textContent = `${apiUrl}/v1`;
    document.getElementById('aider-api-base').textContent = `${apiUrl}/v1`;
    document.getElementById('langchain-base-url').textContent = `${apiUrl}/v1`;
    document.getElementById('llamaindex-base-url').textContent = `${apiUrl}/v1`;
    
    // Check auth status
    checkAuthStatus();
    
    async function checkAuthStatus() {
      const banner = document.getElementById('status-banner');
      try {
        const response = await fetch(`${apiUrl}/auth/status`);
        const data = await response.json();
        
        if (data.status === 'authenticated') {
          banner.className = 'status-banner success';
          banner.innerHTML = '‚úÖ <strong>Authenticated!</strong> Your proxy is ready to use. Token expires: ' + 
            (data.expiresAt ? new Date(data.expiresAt * 1000).toLocaleString() : 'Unknown');
        } else {
          banner.className = 'status-banner warning';
          banner.innerHTML = '‚ö†Ô∏è <strong>Not authenticated.</strong> <a href="/auth.html">Click here to authenticate</a> before using the proxy.';
        }
      } catch (error) {
        banner.className = 'status-banner warning';
        banner.innerHTML = '‚ö†Ô∏è Could not check authentication status.';
      }
    }
    
    // Test connection
    document.getElementById('test-connection-btn').addEventListener('click', testConnection);
    
    async function testConnection() {
      const btn = document.getElementById('test-connection-btn');
      const result = document.getElementById('test-result');
      
      btn.disabled = true;
      btn.textContent = 'Testing...';
      result.className = 'test-result';
      result.style.display = 'none';
      
      try {
        const response = await fetch(`${apiUrl}/v1/models`);
        const data = await response.json();
        
        if (response.ok && data.data) {
          result.className = 'test-result success';
          result.innerHTML = `‚úÖ <strong>Connection successful!</strong> Found ${data.data.length} available models.`;
        } else {
          throw new Error(data.error?.message || 'Unknown error');
        }
      } catch (error) {
        result.className = 'test-result error';
        result.innerHTML = `‚ùå <strong>Connection failed:</strong> ${error.message}. <a href="/auth.html">Try authenticating first.</a>`;
      }
      
      btn.disabled = false;
      btn.textContent = 'üîó Test Connection';
    }
    
    // Copy to clipboard
    function copyToClipboard(elementId, btn) {
      const text = document.getElementById(elementId).textContent;
      navigator.clipboard.writeText(text).then(() => {
        btn.textContent = 'Copied!';
        btn.className = 'copy-btn copied';
        setTimeout(() => {
          btn.textContent = 'Copy';
          btn.className = 'copy-btn';
        }, 2000);
      });
    }
    
    function copyConfig(type) {
      let config = '';
      if (type === 'continue') {
        config = JSON.stringify({
          "models": [{
            "title": "GitHub Copilot (via Proxy)",
            "provider": "openai",
            "model": "gpt-4o",
            "apiBase": `${apiUrl}/v1`,
            "apiKey": "dummy"
          }]
        }, null, 2);
      }
      navigator.clipboard.writeText(config);
    }
  </script>
</body>
</html>
